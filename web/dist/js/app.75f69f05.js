(function(n){function e(e){for(var o,c,u=e[0],i=e[1],l=e[2],s=0,f=[];s<u.length;s++)c=u[s],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&f.push(r[c][0]),r[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var n,e=0;e<a.length;e++){for(var t=a[e],o=!0,c=1;c<t.length;c++){var u=t[c];0!==r[u]&&(o=!1)}o&&(a.splice(e--,1),n=i(i.s=t[0]))}return n}var o={},c={app:0},r={app:0},a=[];function u(n){return i.p+"js/"+({about:"about"}[n]||n)+"."+{"chunk-06d402df":"1f7fb6db","chunk-1261700a":"de4c94d0",about:"0c61d8ca","chunk-f705c27a":"8cc6431c","chunk-624bb791":"f04d42e3","chunk-780fe23e":"7c8a750a"}[n]+".js"}function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t={"chunk-06d402df":1,"chunk-1261700a":1,"chunk-f705c27a":1,"chunk-624bb791":1,"chunk-780fe23e":1};c[n]?e.push(c[n]):0!==c[n]&&t[n]&&e.push(c[n]=new Promise((function(e,t){for(var o="css/"+({about:"about"}[n]||n)+"."+{"chunk-06d402df":"9aa1be17","chunk-1261700a":"a3adb0ea",about:"31d6cfe0","chunk-f705c27a":"4007374b","chunk-624bb791":"9aa1be17","chunk-780fe23e":"a1cf9441"}[n]+".css",r=i.p+o,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var l=a[u],s=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===o||s===r))return e()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){l=f[u],s=l.getAttribute("data-href");if(s===o||s===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var o=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+n+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete c[n],d.parentNode.removeChild(d),t(a)},d.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){c[n]=0})));var o=r[n];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise((function(e,t){o=r[n]=[e,t]}));e.push(o[2]=a);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=u(n);var f=new Error;l=function(e){s.onerror=s.onload=null,clearTimeout(d);var t=r[n];if(0!==t){if(t){var o=e&&("load"===e.type?"missing":e.type),c=e&&e.target&&e.target.src;f.message="Loading chunk "+n+" failed.\n("+o+": "+c+")",f.name="ChunkLoadError",f.type=o,f.request=c,t[1](f)}r[n]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=o,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)i.d(t,o,function(e){return n[e]}.bind(null,o));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/",i.oe=function(n){throw console.error(n),n};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var f=0;f<l.length;f++)e(l[f]);var d=s;a.push([0,"chunk-vendors"]),t()})({0:function(n,e,t){n.exports=t("56d7")},"44ae":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"k",(function(){return c})),t.d(e,"n",(function(){return r})),t.d(e,"d",(function(){return a})),t.d(e,"h",(function(){return u})),t.d(e,"j",(function(){return i})),t.d(e,"l",(function(){return l})),t.d(e,"a",(function(){return s})),t.d(e,"e",(function(){return f})),t.d(e,"c",(function(){return d})),t.d(e,"i",(function(){return h})),t.d(e,"o",(function(){return p})),t.d(e,"g",(function(){return g})),t.d(e,"m",(function(){return m})),t.d(e,"f",(function(){return _}));var o="AUTH",c="PRIVMSG",r="STATUS",a="CHAT_CHANNEL",u="JOIN_CHANNEL",i="PART_CHANNEL",l="SEND_CHALLENGE",s="ACCEPT_CHALLENGE",f="DECLINE_CHALLENGE",d="CANCEL_CHALLENGE",h="NOTIFY_CHALLENGE",p="WATCH_CHALLENGE",g="INGAME_CHAT",m="SPECTATE",_="ERRORMSG"},"56d7":function(n,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),c=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-app",[t("v-card",[t("v-app-bar",[t("v-toolbar-title",[n._v(n._s(n.$route.name))]),t("v-spacer"),n.authenticated?n._e():t("v-btn",{attrs:{to:"/login",icon:""}},[t("v-icon",[n._v("mdi-account")])],1),t("v-btn",{attrs:{to:"/",icon:""}},[t("v-icon",[n._v("mdi-home")])],1),n.authenticated?t("v-btn",{attrs:{to:"/channels",icon:""}},[t("v-icon",[n._v("mdi-controller-classic")])],1):n._e()],1)],1),t("v-main",[t("v-container",{attrs:{fluid:""}},[t("router-view")],1)],1),n.connected?n._e():t("div",{staticClass:"overlay"},[n._v(" "+n._s(void 0==n.connected?"连接中":"连接失败")+" ")])],1)},r=[],a=t("5530"),u=t("2f62"),i={name:"App",computed:Object(a["a"])({},Object(u["b"])(["authenticated","connected"]))},l=i,s=t("2877"),f=t("6544"),d=t.n(f),h=t("7496"),p=t("40dc"),g=t("8336"),m=t("b0af"),_=t("a523"),b=t("132d"),C=t("f6c4"),E=t("2fa4"),v=t("2a7f"),L=Object(s["a"])(l,c,r,!1,null,null,null),N=L.exports;d()(L,{VApp:h["a"],VAppBar:p["a"],VBtn:g["a"],VCard:m["a"],VContainer:_["a"],VIcon:b["a"],VMain:C["a"],VSpacer:E["a"],VToolbarTitle:v["a"]});t("d3b7"),t("3ca3"),t("ddb0"),t("b0c0");var O,w,A,y,j=t("8c4f"),H=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("pre",[n._v("WELCOME \n\nwell...welcome\ndont have anything for ya yet,but things are getting promising ;]\n")])},k=[],S={name:"Home"},T=S,P=Object(s["a"])(T,H,k,!1,null,null,null),G=P.exports,U=t("ade3"),R=t("57f5"),I="SUCCESS",M=(t("ac1f"),t("5319"),window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),q=t("44ae"),V={init:function(){this.ws=new WebSocket(M.replace("https://","ws://").replace("http://","ws://")+"/ws"),this.ws.onmessage=this.onWsMessage,this.ws.onopen=this.onWsOpen,this.ws.onclose=this.onWsClose,this.onCodeUpdate=void 0,console.log("[API] Service initialized")},reply:function(n,e){var t=JSON.stringify({type:n,data:e});return this.ws.send(t)},onWsClose:function(){ln.dispatch(R["e"],!1)},onWsOpen:function(){ln.dispatch(R["e"],!!V.ws&&V.ws.readyState)},onWsMessage:function(n){var e=JSON.parse(n.data),t=e.type,o=e.data;t==q["f"]?V.onCodeUpdate&&V.onCodeUpdate(o):ln.dispatch(t,o)},login:function(n,e,t){V.onCodeUpdate=t,V.reply(q["b"],{username:n,password:e})},join_channel:function(n,e){V.onCodeUpdate=e,V.reply(q["h"],n)},send_chnmsg:function(n,e){V.onCodeUpdate=e,V.reply(q["d"],n)},send_privmsg:function(n,e,t){V.onCodeUpdate=t,V.reply(q["k"],{username:n,message:e})},send_challenge:function(n,e){V.onCodeUpdate=e,V.reply(q["l"],n)},delice_challenge:function(n,e){V.onCodeUpdate=e,V.reply(q["e"],n)},cancel_challenge:function(n,e){V.onCodeUpdate=e,V.reply(q["c"],n)},accept_challenge:function(n,e){V.onCodeUpdate=e,V.reply(q["a"],n)},watch_challenge:function(n,e){V.onCodeUpdate=e,V.reply(q["o"],n)},url_ref_port:M+"/port",url_list_channel:M+"/channels",url_list_users:M+"/channels/users?channel=",url_chat_history:M+"/channels/chathistory?channel="},x=V,W={username:void 0,password:void 0,authenticated:!1},D={username:function(n){return n.username},channel:function(n){return n.channel},authenticated:function(n){return n.authenticated}},B=Object(U["a"])({},R["b"],(function(n,e){return new Promise((function(n,t){W.username=e.username,W.password=e.password,x.login(W.username,W.password,(function(e){console.log("[AUTH]",e),e==I?(W.authenticated=!0,n(e)):(W.authenticated=!1,t(e))}))}))})),F={state:W,actions:B,getters:D},J={channels:[],channel_current:"lobby",channel_users:[]},$={channels:function(n){return n.channels},channel_current:function(n){return n.channel_current},channel_users:function(n){return n.channel_users}},Q=(O={},Object(U["a"])(O,R["g"],(function(n,e){return new Promise((function(n,t){x.join_channel(e,(function(o){o==I?(n(o),J.channel_current=e):t(o)}))}))})),Object(U["a"])(O,q["h"],(function(n,e){console.log("[CHANNEL] Client joined:",e.username,e.channel),J.channel_current=e.channel,n.dispatch(R["i"]),n.dispatch(R["l"])})),Object(U["a"])(O,q["j"],(function(n,e){console.log("[CHANNEL] Client left:",e.username,e.channel),e.username!=ln.getters.username&&n.dispatch(R["l"]),n.dispatch(R["i"])})),Object(U["a"])(O,R["i"],(function(){return console.log("[CHANNEL] Refreshing list."),fetch(x.url_list_channel).then((function(n){return n.json()})).then((function(n){return J.channels=n}))})),Object(U["a"])(O,R["l"],(function(){return console.log("[CHANNEL] Refreshing users of channel:",J.channel_current),fetch(x.url_list_users+J.channel_current).then((function(n){return n.json()})).then((function(n){return J.channel_users=n}))})),O),Y={state:J,actions:Q,getters:$},z={connected:void 0,ggpo_port:void 0,ggpo_host:window.location.hostname},K={connected:function(n){return n.connected},ggpo_host:function(n){return n.ggpo_host},ggpo_port:function(n){return n.ggpo_port}},X=(w={},Object(U["a"])(w,R["e"],(function(n,e){1==e?(console.log("[CONNECTION] Connection established"),n.dispatch(R["k"]).then((function(n){console.log("[CONNECTION] Conection ready. Got port:",n.port),z.ggpo_port=n.port,z.connected=!0}))):(console.log("[CONNECTION] DISCONNECTED"),z.connected=!1)})),Object(U["a"])(w,R["k"],(function(){return fetch(x.url_ref_port).then((function(n){return n.json()}))})),w),Z={state:z,actions:X,getters:K},nn={},en={},tn=(A={},Object(U["a"])(A,q["d"],(function(n,e){console.log("[CHAT] Channel message received from:",e.username,e.message)})),Object(U["a"])(A,R["d"],(function(n,e){return new Promise((function(n,t){x.send_chnmsg(e,(function(e){e==I?n(e):t(e)}))}))})),Object(U["a"])(A,q["k"],(function(n,e){console.log("[CHAT] PM recevied from:",e.sender,e.message)})),Object(U["a"])(A,R["h"],(function(n,e){return new Promise((function(n,t){x.send_privmsg(e.username,e.message,(function(e){e==I?n(e):t(e)}))}))})),Object(U["a"])(A,q["g"],(function(n,e){console.log("[CHAT] Ingame chat recevied from:",e.username,e.message)})),Object(U["a"])(A,R["j"],(function(n,e){return fetch(x.url_chat_history+e).then((function(n){return n.json()}))})),A),on={state:nn,actions:tn,getters:en},cn={challenging:void 0,challenger:void 0,quark:void 0,status:void 0},rn={challenging:function(n){return n.challenging},challenger:function(n){return n.challenger},quark:function(n){return n.quark}},an=(y={},Object(U["a"])(y,R["m"],(function(n,e){return console.log("[CHALLENGE] Sending to:",e),new Promise((function(n,t){x.send_challenge(e,(function(o){o==I?(n(o),cn.challenging=e):t(o)}))}))})),Object(U["a"])(y,q["l"],(function(n,e){console.log("[CHALLENGE] Being Challenged! Challenger:",e),cn.challenger=e})),Object(U["a"])(y,q["e"],(function(n,e){console.log("[CHALLENGE] Challenge deliced by:",e),cn.challenging=void 0})),Object(U["a"])(y,R["f"],(function(n,e){return console.log("[CHALLENGE] Declining challenge from:",e),new Promise((function(n,t){x.delice_challenge(e,(function(e){e==I?(n(e),cn.challenger=void 0):t(e)}))}))})),Object(U["a"])(y,q["c"],(function(n,e){console.log("[CHALLENGE] Challenge canceled by:",e),cn.challenger=void 0})),Object(U["a"])(y,R["c"],(function(n,e){return console.log("[CHALLENGE] Canceling challenge to:",e),new Promise((function(n,t){x.cancel_challenge(e,(function(e){e==I?(n(e),cn.challenging=void 0):t(e)}))}))})),Object(U["a"])(y,R["a"],(function(n,e){return console.log("[CHALLENGE] Accepting challenge from:",e),new Promise((function(n,t){x.accept_challenge(e,(function(e){e==I?n(e):t(e)}))}))})),Object(U["a"])(y,q["a"],(function(n,e){console.log("[CHALLENGE] Quark distributed:",e),cn.quark=e})),Object(U["a"])(y,q["n"],(function(n,e){console.log("[STATUS] Update:",e),cn.status=e})),Object(U["a"])(y,q["i"],(function(n,e){console.log("[SPEC] Challenge available for spectating,from:",e),n.dispatch(R["l"])})),Object(U["a"])(y,q["o"],(function(n,e){console.log("[SPEC] Quark distributed:",e)})),Object(U["a"])(y,R["n"],(function(n,e){return console.log("[SPEC] Sending request to watch match of:",e),new Promise((function(n,t){x.watch_challenge(e,(function(e){e==I?n(e):t(e)}))}))})),Object(U["a"])(y,q["m"],(function(n,e){console.log("[SPEC] Current spectators",e)})),y),un={state:cn,actions:an,getters:rn};o["a"].use(u["a"]);var ln=new u["a"].Store({modules:{connection:Z,auth:F,channels:Y,chat:on,challenge:un}});o["a"].use(j["a"]);var sn=[{path:"/",name:"主页",component:G},{path:"/login",name:"登陆",component:function(){return Promise.all([t.e("chunk-1261700a"),t.e("about")]).then(t.bind(null,"a55b"))}},{path:"/channels",name:"频道列表",component:function(){return t.e("chunk-06d402df").then(t.bind(null,"3010"))}},{path:"/channel",name:"频道",component:function(){return Promise.all([t.e("chunk-1261700a"),t.e("chunk-f705c27a"),t.e("chunk-780fe23e")]).then(t.bind(null,"92d6"))},props:function(n){return{name:n.query.name}}},{path:"/challenge",name:"挑战",component:function(){return Promise.all([t.e("chunk-1261700a"),t.e("chunk-f705c27a"),t.e("chunk-624bb791")]).then(t.bind(null,"98ed"))},props:function(n){return{challenging:n.query.challenging,challenger:n.query.challenger,spectating:n.query.spectating}}}],fn=new j["a"]({routes:sn});fn.beforeEach((function(n,e,t){ln.getters&&("登陆"==n.name&&ln.getters.authenticated&&t({path:"/channels"}),"频道列表"!=n.name||ln.getters.authenticated||t({path:"/login"}),"频道"!=n.name||ln.getters.authenticated||t({path:"/login"}),"挑战"!=n.name||ln.getters.authenticated||t({path:"/login"}),t())})),fn.afterEach((function(n){o["a"].nextTick((function(){document.title=n.name}))}));var dn=fn,hn=t("f309");o["a"].use(hn["a"]);var pn=new hn["a"]({});o["a"].config.productionTip=!1,x.init(),new o["a"]({router:dn,store:ln,vuetify:pn,render:function(n){return n(N)}}).$mount("#app")},"57f5":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"h",(function(){return c})),t.d(e,"d",(function(){return r})),t.d(e,"g",(function(){return a})),t.d(e,"m",(function(){return u})),t.d(e,"a",(function(){return i})),t.d(e,"f",(function(){return l})),t.d(e,"c",(function(){return s})),t.d(e,"n",(function(){return f})),t.d(e,"e",(function(){return d})),t.d(e,"k",(function(){return h})),t.d(e,"i",(function(){return p})),t.d(e,"l",(function(){return g})),t.d(e,"j",(function(){return m}));var o="L_AUTH",c="L_PRIVMSG",r="L_CHAT_CHANNEL",a="L_JOIN_CHANNEL",u="L_SEND_CHALLENGE",i="L_ACCEPT_CHALLENGE",l="L_DECLINE_CHALLENGE",s="L_CANCEL_CHALLENGE",f="L_WATCH_CHALLENGE",d="L_CONNECT",h="L_REFRESH_PORT",p="L_REFRESH_CHANNELS",g="L_REFRESH_USERS",m="L_REFRESH_HISTROY"}});
//# sourceMappingURL=app.75f69f05.js.map