(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21e3e626"],{"4c53":function(t,e,a){"use strict";var s=a("23e7"),i=a("857a"),n=a("af03");s({target:"String",proto:!0,forced:n("sub")},{sub:function(){return i(this,"sub","","")}})},"553a":function(t,e,a){"use strict";var s=a("5530"),i=(a("a9e3"),a("c7cd"),a("b5b6"),a("8dd9")),n=a("3a66"),c=a("d10f"),o=a("58df"),l=a("80d2");e["a"]=Object(o["a"])(i["a"],Object(n["a"])("footer",["height","inset"]),c["a"]).extend({name:"v-footer",props:{height:{default:"auto",type:[Number,String]},inset:Boolean,padless:Boolean,tag:{type:String,default:"footer"}},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},classes:function(){return Object(s["a"])(Object(s["a"])({},i["a"].options.computed.classes.call(this)),{},{"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--padless":this.padless,"v-footer--inset":this.inset})},computedBottom:function(){if(this.isPositioned)return this.app?this.$vuetify.application.bottom:0},computedLeft:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.left:0},computedRight:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.right:0},isPositioned:function(){return Boolean(this.absolute||this.fixed||this.app)},styles:function(){var t=parseInt(this.height);return Object(s["a"])(Object(s["a"])({},i["a"].options.computed.styles.call(this)),{},{height:isNaN(t)?t:Object(l["f"])(t),left:Object(l["f"])(this.computedLeft),right:Object(l["f"])(this.computedRight),bottom:Object(l["f"])(this.computedBottom)})}},methods:{updateApplication:function(){var t=parseInt(this.height);return isNaN(t)?this.$el?this.$el.clientHeight:0:t}},render:function(t){var e=this.setBackgroundColor(this.color,{staticClass:"v-footer",class:this.classes,style:this.styles});return t(this.tag,e,this.$slots.default)}})},"8ce9":function(t,e,a){},"90b9":function(t,e,a){"use strict";a("99af");var s={getDateString:function(t){return"".concat(new Date(t).toLocaleDateString("zh-CN")," ").concat(new Date(t).toLocaleTimeString("zh-CN"))}};e["a"]=s},"98ed":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0",staticStyle:{overflow:"hidden"},attrs:{flex:""}},[a("v-header",{attrs:{app:"",color:"transparent",inset:""}},[a("v-container",{staticStyle:{display:"flex","flex-direction":"column"}},[t.player1Status?a("v-container",{staticClass:"mb-0 pa-0"},[a("p",{staticStyle:{float:"left"}},[a("b",[t._v("P"),a("sub",[t._v("1")])]),t._v("："+t._s(t.player1Status.username)+" ")]),a("p",{staticStyle:{float:"right"}},[a("v-text",{staticClass:"pr-2",class:t.player1Status.emulator?"status-active":"status-dead"},[a("v-icon",[t._v("mdi-switch")]),t._v(" EMU")],1),a("v-text",{staticClass:"pr-2",class:"PLAYING"==t.player1Status.status?"status-active":""},[a("v-icon",[t._v("mdi-state-machine")]),t._v(t._s(t.player1Status.status))],1),a("v-text",{staticClass:"pr-2"},[a("v-icon",[t._v("mdi-account")]),t._v(t._s(t.player1Status.side))],1)],1)]):t._e(),t.player2Status?a("v-container",{staticClass:"mb-0 pa-0"},[a("p",{staticStyle:{float:"left"}},[a("b",[t._v("P"),a("sub",[t._v("2")])]),t._v("："+t._s(t.player2Status.username)+" ")]),a("p",{staticStyle:{float:"right"}},[a("v-text",{staticClass:"pr-2",class:t.player2Status.emulator?"status-active":"status-dead"},[a("v-icon",[t._v("mdi-switch")]),t._v(" EMU")],1),a("v-text",{staticClass:"pr-2",class:"PLAYING"==t.player2Status.status?"status-active":""},[a("v-icon",[t._v("mdi-state-machine")]),t._v(t._s(t.player2Status.status))],1),a("v-text",{staticClass:"pr-2"},[a("v-icon",[t._v("mdi-account")]),t._v(t._s(t.player2Status.side))],1)],1)]):t._e()],1),t.player1Status||t.player2Status?a("v-divider",{staticClass:"mt-0"}):t._e()],1),a("v-container",{staticClass:"log-view pt-0"},t._l(t.logs,(function(e){return a("div",{key:e.ts,style:"color:"+t.logColors[e.level]},[t._v(" ["+t._s(e.level)+"] "+t._s(t.Utils.getDateString(e.ts))+" "+t._s(e.msg)+" ")])})),0),a("v-footer",{attrs:{app:"",color:"transparent",inset:""}},[a("v-container",[t.canceled?t._e():a("v-btn",{staticClass:"pr-4 red",staticStyle:{width:"100%"},on:{click:t.cancel_challenge}},[t._v("取消挑战")]),t.canceled?a("v-btn",{staticClass:"pr-4",staticStyle:{width:"100%"},attrs:{to:"/channel/?name="+t.channel_current}},[t._v("返回 "+t._s(t.channel_current))]):t._e()],1)],1)],1)},i=[],n=a("5530"),c=(a("4c53"),a("99af"),a("2f62")),o=a("57f5"),l=a("90b9"),r=a("44ae"),u={name:"Challenge",props:["challenging","challenger"],data:function(){return{logs:[],logColors:{D:"blue",I:"green",E:"red"},player1Status:{},player2Status:{},statusUpdateKey:0,canceled:!1,sub:void 0,Utils:l["a"]}},methods:{log:function(t,e){this.logs.push({ts:(new Date).getTime(),level:t,msg:e})},cancel_challenge:function(){var t=this;this.$store.dispatch(o["c"],this.opponent).then((function(){t.log("E","挑战已被取消"),t.canceled=!0})).catch((function(e){t.log("E","挑战取消失败:".concat(e)),t.canceled=!0}))},send_challenge:function(){var t=this;this.log("D","挑战 ".concat(this.opponent)),this.$store.dispatch(o["l"],this.opponent).then((function(){t.log("I","已发送挑战邀请")})).catch((function(e){t.log("E","邀请失败：".concat(e)),t.canceled=!0}))},accept_challenge:function(){var t=this;this.log("D","接受 ".concat(this.opponent," 的挑战")),this.$store.dispatch(o["a"],this.opponent).then((function(){t.log("I","挑战已接受！")})).catch((function(e){t.log("E","接受失败：".concat(e)),t.canceled=!0}))},onload:function(){var t=this;this.log("D","".concat(this.username," 已加入")),this.sub||(this.sub=this.$store.subscribeAction((function(e){e.type!=r["d"]&&e.type!=r["g"]||t.log("I","[".concat(e.type==r["d"]?"公屏":"游戏内","] ").concat(e.payload.username," : ").concat(e.payload.message)),e.type==r["j"]&&t.log("I","[私信] ".concat(e.payload.sender," : ").concat(e.payload.message)),e.type!=r["c"]&&e.type!=r["i"]&&e.type!=r["e"]||(t.log("E","挑战已失效：".concat(e.type)),t.canceled=!0),e.type==r["a"]&&(t.quark=e.payload,t.log("I","比赛 QUARK:".concat(t.quark))),e.type==r["l"]&&(t.player1Status&&(e.payload.username==t.player1Status.username||"PLAYER1"==e.payload.side)&&(t.player1Status=e.payload),t.player2Status&&(e.payload.username==t.player2Status.username||"PLAYER2"==e.payload.side)&&(t.player2Status=e.payload),t.statusUpdateKey+=1)}))),this.challenging?this.send_challenge():this.challenger&&this.accept_challenge()}},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["channel_current","channel_users","username","connected"])),{},{opponent:function(){return this.challenging?this.challenging:this.challenger}}),destroy:function(){this.sub&&this.sub()},mounted:function(){this.connected&&this.onload()},watch:{connected:function(){this.connected&&this.onload()}}},h=u,p=a("2877"),d=a("6544"),v=a.n(d),f=a("8336"),g=a("a523"),y=a("ce7e"),m=a("553a"),b=a("132d"),_=Object(p["a"])(h,s,i,!1,null,null,null);e["default"]=_.exports;v()(_,{VBtn:f["a"],VContainer:g["a"],VDivider:y["a"],VFooter:m["a"],VIcon:b["a"]})},b5b6:function(t,e,a){},ce7e:function(t,e,a){"use strict";var s=a("5530"),i=(a("8ce9"),a("7560"));e["a"]=i["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:Object(s["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(s["a"])({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})}}]);
//# sourceMappingURL=chunk-21e3e626.6a4f1846.js.map