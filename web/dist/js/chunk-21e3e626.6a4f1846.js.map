{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///../../../src/components/VFooter/VFooter.ts","webpack:///./src/common/utils.js","webpack:///./src/views/Challenge.vue?d08b","webpack:///src/views/Challenge.vue","webpack:///./src/views/Challenge.vue?a4b5","webpack:///./src/views/Challenge.vue","webpack:///../../../src/components/VDivider/VDivider.ts"],"names":["$","createHTML","forcedStringHTMLMethod","target","proto","forced","sub","this","name","props","height","default","type","Number","String","inset","padless","tag","computed","applicationProperty","classes","app","computedBottom","$vuetify","application","computedLeft","computedRight","isPositioned","Boolean","absolute","styles","parseInt","isNaN","left","right","bottom","methods","updateApplication","$el","render","data","setBackgroundColor","staticClass","class","style","h","$slots","Utils","getDateString","ts","Date","toLocaleDateString","toLocaleTimeString","_vm","_h","$createElement","_c","_self","staticStyle","attrs","_v","_s","player1Status","username","emulator","status","side","_e","player2Status","_l","log","key","logColors","level","msg","canceled","on","cancel_challenge","channel_current","staticRenderFns","logs","push","$store","send_challenge","accept_challenge","onload","subscribeAction","action","challenging","opponent","challenger","destroy","mounted","connected","watch","component","VBtn","VContainer","VDivider","VFooter","VIcon","vertical","$attrs","role","orientation","themeClasses","$listeners"],"mappings":"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","file":"js/chunk-21e3e626.6a4f1846.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","// Styles\nimport './VFooter.sass'\n\n// Components\nimport VSheet from '../VSheet/VSheet'\n\n// Mixins\nimport Applicationable from '../../mixins/applicationable'\nimport SSRBootable from '../../mixins/ssr-bootable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport { convertToUnit } from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue/types/vnode'\n\n/* @vue/component */\nexport default mixins(\n  VSheet,\n  Applicationable('footer', [\n    'height',\n    'inset',\n  ]),\n  SSRBootable\n).extend({\n  name: 'v-footer',\n\n  props: {\n    height: {\n      default: 'auto',\n      type: [Number, String],\n    },\n    inset: Boolean,\n    padless: Boolean,\n    tag: {\n      type: String,\n      default: 'footer',\n    },\n  },\n\n  computed: {\n    applicationProperty (): string {\n      return this.inset ? 'insetFooter' : 'footer'\n    },\n    classes (): object {\n      return {\n        ...VSheet.options.computed.classes.call(this),\n        'v-footer--absolute': this.absolute,\n        'v-footer--fixed': !this.absolute && (this.app || this.fixed),\n        'v-footer--padless': this.padless,\n        'v-footer--inset': this.inset,\n      }\n    },\n    computedBottom (): number | undefined {\n      if (!this.isPositioned) return undefined\n\n      return this.app\n        ? this.$vuetify.application.bottom\n        : 0\n    },\n    computedLeft (): number | undefined {\n      if (!this.isPositioned) return undefined\n\n      return this.app && this.inset\n        ? this.$vuetify.application.left\n        : 0\n    },\n    computedRight (): number | undefined {\n      if (!this.isPositioned) return undefined\n\n      return this.app && this.inset\n        ? this.$vuetify.application.right\n        : 0\n    },\n    isPositioned (): boolean {\n      return Boolean(\n        this.absolute ||\n        this.fixed ||\n        this.app\n      )\n    },\n    styles (): object {\n      const height = parseInt(this.height)\n\n      return {\n        ...VSheet.options.computed.styles.call(this),\n        height: isNaN(height) ? height : convertToUnit(height),\n        left: convertToUnit(this.computedLeft),\n        right: convertToUnit(this.computedRight),\n        bottom: convertToUnit(this.computedBottom),\n      }\n    },\n  },\n\n  methods: {\n    updateApplication () {\n      const height = parseInt(this.height)\n\n      return isNaN(height)\n        ? this.$el ? this.$el.clientHeight : 0\n        : height\n    },\n  },\n\n  render (h): VNode {\n    const data = this.setBackgroundColor(this.color, {\n      staticClass: 'v-footer',\n      class: this.classes,\n      style: this.styles,\n    })\n\n    return h(this.tag, data, this.$slots.default)\n  },\n})\n","const Utils = {\n    getDateString(ts) {\n        // i18n anyone?\n        return `${new Date(ts).toLocaleDateString(\"zh-CN\")} ${new Date(ts).toLocaleTimeString(\"zh-CN\")}`;\n    }\n}\n\nexport default Utils","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0\",staticStyle:{\"overflow\":\"hidden\"},attrs:{\"flex\":\"\"}},[_c('v-header',{attrs:{\"app\":\"\",\"color\":\"transparent\",\"inset\":\"\"}},[_c('v-container',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\"}},[(_vm.player1Status)?_c('v-container',{staticClass:\"mb-0 pa-0\"},[_c('p',{staticStyle:{\"float\":\"left\"}},[_c('b',[_vm._v(\"P\"),_c('sub',[_vm._v(\"1\")])]),_vm._v(\"：\"+_vm._s(_vm.player1Status.username)+\" \")]),_c('p',{staticStyle:{\"float\":\"right\"}},[_c('v-text',{staticClass:\"pr-2\",class:_vm.player1Status.emulator ? 'status-active' : 'status-dead'},[_c('v-icon',[_vm._v(\"mdi-switch\")]),_vm._v(\" EMU\")],1),_c('v-text',{staticClass:\"pr-2\",class:_vm.player1Status.status=='PLAYING' ? 'status-active' : ''},[_c('v-icon',[_vm._v(\"mdi-state-machine\")]),_vm._v(_vm._s(_vm.player1Status.status))],1),_c('v-text',{staticClass:\"pr-2\"},[_c('v-icon',[_vm._v(\"mdi-account\")]),_vm._v(_vm._s(_vm.player1Status.side))],1)],1)]):_vm._e(),(_vm.player2Status)?_c('v-container',{staticClass:\"mb-0 pa-0\"},[_c('p',{staticStyle:{\"float\":\"left\"}},[_c('b',[_vm._v(\"P\"),_c('sub',[_vm._v(\"2\")])]),_vm._v(\"：\"+_vm._s(_vm.player2Status.username)+\" \")]),_c('p',{staticStyle:{\"float\":\"right\"}},[_c('v-text',{staticClass:\"pr-2\",class:_vm.player2Status.emulator ? 'status-active' : 'status-dead'},[_c('v-icon',[_vm._v(\"mdi-switch\")]),_vm._v(\" EMU\")],1),_c('v-text',{staticClass:\"pr-2\",class:_vm.player2Status.status=='PLAYING' ? 'status-active' : ''},[_c('v-icon',[_vm._v(\"mdi-state-machine\")]),_vm._v(_vm._s(_vm.player2Status.status))],1),_c('v-text',{staticClass:\"pr-2\"},[_c('v-icon',[_vm._v(\"mdi-account\")]),_vm._v(_vm._s(_vm.player2Status.side))],1)],1)]):_vm._e()],1),(_vm.player1Status || _vm.player2Status)?_c('v-divider',{staticClass:\"mt-0\"}):_vm._e()],1),_c('v-container',{staticClass:\"log-view pt-0\"},_vm._l((_vm.logs),function(log){return _c('div',{key:log.ts,style:('color:' + _vm.logColors[log.level])},[_vm._v(\" [\"+_vm._s(log.level)+\"] \"+_vm._s(_vm.Utils.getDateString(log.ts))+\" \"+_vm._s(log.msg)+\" \")])}),0),_c('v-footer',{attrs:{\"app\":\"\",\"color\":\"transparent\",\"inset\":\"\"}},[_c('v-container',[(!_vm.canceled)?_c('v-btn',{staticClass:\"pr-4 red\",staticStyle:{\"width\":\"100%\"},on:{\"click\":_vm.cancel_challenge}},[_vm._v(\"取消挑战\")]):_vm._e(),(_vm.canceled)?_c('v-btn',{staticClass:\"pr-4\",staticStyle:{\"width\":\"100%\"},attrs:{\"to\":(\"/channel/?name=\" + _vm.channel_current)}},[_vm._v(\"返回 \"+_vm._s(_vm.channel_current))]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"pa-0\" flex style=\"overflow: hidden\">\n    <v-header app color=\"transparent\" inset>\n      <v-container style=\"display:flex;flex-direction:column\">\n        <v-container v-if=\"player1Status\" class=\"mb-0 pa-0\">\n          <p style=\"float:left\">\n            <b>P<sub>1</sub></b>：{{ player1Status.username }}\n          </p>\n          <p style=\"float:right\">\n            <v-text class=\"pr-2\" :class=\"player1Status.emulator ? 'status-active' : 'status-dead'\"><v-icon>mdi-switch</v-icon> EMU</v-text>            \n            <v-text class=\"pr-2\" :class=\"player1Status.status=='PLAYING' ? 'status-active' : ''\"><v-icon>mdi-state-machine</v-icon>{{ player1Status.status }}</v-text>\n            <v-text class=\"pr-2\"><v-icon>mdi-account</v-icon>{{ player1Status.side }}</v-text>\n          </p>\n        </v-container>\n\n        <v-container v-if=\"player2Status\" class=\"mb-0 pa-0\">\n          <p style=\"float:left\">\n            <b>P<sub>2</sub></b>：{{ player2Status.username }}\n          </p>\n          <p style=\"float:right\">\n            <v-text class=\"pr-2\" :class=\"player2Status.emulator ? 'status-active' : 'status-dead'\"><v-icon>mdi-switch</v-icon> EMU</v-text>            \n            <v-text class=\"pr-2\" :class=\"player2Status.status=='PLAYING' ? 'status-active' : ''\"><v-icon>mdi-state-machine</v-icon>{{ player2Status.status }}</v-text>\n            <v-text class=\"pr-2\"><v-icon>mdi-account</v-icon>{{ player2Status.side }}</v-text>\n          </p>\n        </v-container>\n      </v-container>\n      <!-- Player status -->\n      <v-divider v-if=\"player1Status || player2Status\" class=\"mt-0\"></v-divider>\n    </v-header>\n    <v-container class=\"log-view pt-0\">\n      <div\n        v-for=\"log in logs\"\n        :key=\"log.ts\"\n        :style=\"'color:' + logColors[log.level]\"\n      >\n        [{{ log.level }}] {{ Utils.getDateString(log.ts) }} {{ log.msg }}\n      </div>\n    </v-container>\n    <!-- Log box -->\n    <v-footer app color=\"transparent\" inset>\n      <v-container>\n        <v-btn\n          v-if=\"!canceled\"\n          class=\"pr-4 red\"\n          style=\"width: 100%\"\n          v-on:click=\"cancel_challenge\"\n          >取消挑战</v-btn\n        >\n        <v-btn\n          v-if=\"canceled\"\n          class=\"pr-4\"\n          style=\"width: 100%\"\n          :to=\"`/channel/?name=${channel_current}`\"\n          >返回 {{ channel_current }}</v-btn\n        >\n      </v-container>\n    </v-footer>\n    <!-- Controls -->\n  </v-container>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport {\n  ACCEPT_CHALLENGE as ACCEPT_CHALLENGE_L,\n  CANCEL_CHALLENGE as CANCEL_CHALLENGE_L,\n  SEND_CHALLENGE as SEND_CHALLENGE_L,\n} from \"../store/actions.local\";\nimport Utils from \"../common/utils\";\nimport {\n  ACCEPT_CHALLENGE,\n  DECLINE_CHALLENGE,\n  CANCEL_CHALLENGE,\n  PART_CHANNEL,\n  STATUS,\n  CHAT_CHANNEL,\n  INGAME_CHAT,\n  PRIVMSG\n} from \"../store/actions.remote\";\nexport default {\n  name: \"Challenge\",\n  props: [\"challenging\", \"challenger\"],\n  data: () => ({\n    logs: [],\n    logColors: { D: \"blue\", I: \"green\", E: \"red\" },\n\n    player1Status: {},\n    player2Status: {},\n    statusUpdateKey: 0,\n\n    canceled: false,\n\n    sub: undefined,\n    Utils: Utils,\n  }),\n  methods: {\n    log(level, msg) {\n      this.logs.push({ ts: new Date().getTime(), level: level, msg: msg });\n    },\n    cancel_challenge() {\n      this.$store\n        .dispatch(CANCEL_CHALLENGE_L, this.opponent)\n        .then(() => {\n          this.log(\"E\", \"挑战已被取消\");\n          this.canceled = true;\n        })\n        .catch((e) => {\n          this.log(\"E\", `挑战取消失败:${e}`);\n          this.canceled = true;\n        });\n    },\n    send_challenge() {\n      /* challenges our opponent */\n      this.log(\"D\", `挑战 ${this.opponent}`);\n      this.$store\n        .dispatch(SEND_CHALLENGE_L, this.opponent)\n        .then(() => {\n          this.log(\"I\", \"已发送挑战邀请\");\n        })\n        .catch((e) => {\n          this.log(\"E\", `邀请失败：${e}`);\n          this.canceled = true;\n        });\n    },\n    accept_challenge() {\n      /* accept current challenge */\n      this.log(\"D\", `接受 ${this.opponent} 的挑战`);\n      this.$store\n        .dispatch(ACCEPT_CHALLENGE_L, this.opponent)\n        .then(() => {\n          this.log(\"I\", \"挑战已接受！\");\n        })\n        .catch((e) => {\n          this.log(\"E\", `接受失败：${e}`);\n          this.canceled = true;\n        });\n    },\n    onload() {\n      this.log(\"D\", `${this.username} 已加入`);\n      if (!this.sub) {\n        this.sub = this.$store.subscribeAction((action) => {\n          if ( action.type == CHAT_CHANNEL || action.type == INGAME_CHAT ){\n            this.log(\"I\",`[${action.type == CHAT_CHANNEL ? '公屏' : '游戏内'}] ${action.payload.username} : ${action.payload.message}`)\n          }\n          if ( action.type == PRIVMSG ){\n            this.log(\"I\",`[私信] ${action.payload.sender} : ${action.payload.message}`)\n          }\n          if (\n            action.type == CANCEL_CHALLENGE ||\n            action.type == PART_CHANNEL ||\n            action.type == DECLINE_CHALLENGE\n          ) {\n            this.log(\"E\", `挑战已失效：${action.type}`);\n            this.canceled = true;\n          }\n          if (action.type == ACCEPT_CHALLENGE) {\n            this.quark = action.payload;\n            this.log(\"I\", `比赛 QUARK:${this.quark}`);\n          }\n          if (action.type == STATUS) {\n            if (this.player1Status)\n              if (action.payload.username == this.player1Status.username)\n                this.player1Status = action.payload;\n              else if (action.payload.side == \"PLAYER1\")\n                this.player1Status = action.payload;\n            /* update for P1 */\n            if (this.player2Status)\n              if (action.payload.username == this.player2Status.username)\n                this.player2Status = action.payload;\n              else if (action.payload.side == \"PLAYER2\")\n                this.player2Status = action.payload;\n            /* update for P2 */\n            this.statusUpdateKey += 1;\n          }\n        });\n      }\n      if (this.challenging) this.send_challenge();\n      else if (this.challenger) this.accept_challenge();\n    },\n  },\n  computed: {\n    ...mapGetters([\n      \"channel_current\",\n      \"channel_users\",\n      \"username\",\n      \"connected\",\n    ]),\n    opponent() {\n      return this.challenging ? this.challenging : this.challenger;\n    },\n  },\n  destroy() {\n    if (this.sub) this.sub(); // unsubscribe from actions\n  },\n  mounted() {\n    if (this.connected) this.onload();\n  },\n  watch: {\n    connected() {\n      if (this.connected) this.onload();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Challenge.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Challenge.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Challenge.vue?vue&type=template&id=27de5a82&\"\nimport script from \"./Challenge.vue?vue&type=script&lang=js&\"\nexport * from \"./Challenge.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VFooter } from 'vuetify/lib/components/VFooter';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VContainer,VDivider,VFooter,VIcon})\n","// Styles\nimport './VDivider.sass'\n\n// Types\nimport { VNode } from 'vue'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\n\nexport default Themeable.extend({\n  name: 'v-divider',\n\n  props: {\n    inset: Boolean,\n    vertical: Boolean,\n  },\n\n  render (h): VNode {\n    // WAI-ARIA attributes\n    let orientation\n    if (!this.$attrs.role || this.$attrs.role === 'separator') {\n      orientation = this.vertical ? 'vertical' : 'horizontal'\n    }\n    return h('hr', {\n      class: {\n        'v-divider': true,\n        'v-divider--inset': this.inset,\n        'v-divider--vertical': this.vertical,\n        ...this.themeClasses,\n      },\n      attrs: {\n        role: 'separator',\n        'aria-orientation': orientation,\n        ...this.$attrs,\n      },\n      on: this.$listeners,\n    })\n  },\n})\n"],"sourceRoot":""}